{% set page = 'tank' %}
{% extends "layout.html" %}
{% block title %}Eau - {% endblock %}

{% block content %}
<svg id="schema"></svg>

<div>
    Pompe entr√©e :
    <a href="{{ url_for('tank.pump_in', on=1) }}">On</a> /
    <a href="{{ url_for('tank.pump_in', on=0) }}">Off</a>
</div>

<div>
    Pompe sortie:
    <a href="{{ url_for('tank.pump_out', on=1) }}">On</a> /
    <a href="{{ url_for('tank.pump_out', on=0) }}">Off</a>
</div>

<pre style="text-align: left;">
{
{% for k, v in state.items() %}
    "{{ k }}": {{ v }},
{% endfor %}
}
</pre>
{% endblock %}

{% block js %}
<script src="{{ url_for('static', filename='js/rough.min.js') }}"></script>
<script src="{{ url_for('static', filename='js/tank.js') }}"></script>
<script>
    Tank(document.getElementById("schema"), {
        waterLevel: {{ water_level }},
        flowIn: {{ state["flow_in"] }},
        flowOut: {{ state["flow_out"] }},
        pumpIn: {{ state["pump_in"] }},
        pumpOut: {{ state["pump_out"] }},
        isMotorInBlocked: {{ state["is_motor_in_blocked"] }},
        isMotorOutBlocked: {{ state["is_motor_out_blocked"] }},
        isFilterInBlocked: {{ state["is_filter_in_blocked"] }},
        isOverpressured: {{ state["is_overpressured"] }},
        isTankFull: {{ state["is_tank_full"] }},
        isTankEmpty: {{ state["is_tank_empty"] }},
        timeToWellFull: {{ time_to_well_full }},
    });
</script>
{% endblock %}
